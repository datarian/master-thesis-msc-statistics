<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>2.2 Data Import, Cleaning and Preprocessing | Designing a relational marketing model to maximize revenues of targeted marketing campaigns.</title>
  <meta name="description" content="Thesis for the programme Master in Statistics at the University of Neuchâtel, Switzerland.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="2.2 Data Import, Cleaning and Preprocessing | Designing a relational marketing model to maximize revenues of targeted marketing campaigns." />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Thesis for the programme Master in Statistics at the University of Neuchâtel, Switzerland." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.2 Data Import, Cleaning and Preprocessing | Designing a relational marketing model to maximize revenues of targeted marketing campaigns." />
  
  <meta name="twitter:description" content="Thesis for the programme Master in Statistics at the University of Neuchâtel, Switzerland." />
  

<meta name="author" content="Florian Hochstrasser">


<meta name="date" content="2019-04-04">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="tools-used.html">
<link rel="next" href="cleaning-preprocessing.html">
<script src="assets/jquery-2.2.3/jquery.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="assets/kePrint-0.0.1/kePrint.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="task-background.html"><a href="task-background.html"><i class="fa fa-check"></i><b>1.1</b> Task Background</a></li>
<li class="chapter" data-level="1.2" data-path="goal.html"><a href="goal.html"><i class="fa fa-check"></i><b>1.2</b> Goal</a></li>
<li class="chapter" data-level="1.3" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>1.3</b> Glossary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>2</b> Methods</a><ul>
<li class="chapter" data-level="2.1" data-path="tools-used.html"><a href="tools-used.html"><i class="fa fa-check"></i><b>2.1</b> Tools Used</a><ul>
<li class="chapter" data-level="2.1.1" data-path="tools-used.html"><a href="tools-used.html#jupyter-notebook"><i class="fa fa-check"></i><b>2.1.1</b> Jupyter Notebook</a></li>
<li class="chapter" data-level="2.1.2" data-path="tools-used.html"><a href="tools-used.html#pandas"><i class="fa fa-check"></i><b>2.1.2</b> Pandas</a></li>
<li class="chapter" data-level="2.1.3" data-path="tools-used.html"><a href="tools-used.html#scikit-learn"><i class="fa fa-check"></i><b>2.1.3</b> Scikit-learn</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-import-cleaning-and-preprocessing.html"><a href="data-import-cleaning-and-preprocessing.html"><i class="fa fa-check"></i><b>2.2</b> Data Import, Cleaning and Preprocessing</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-import-cleaning-and-preprocessing.html"><a href="data-import-cleaning-and-preprocessing.html#package-kdd98"><i class="fa fa-check"></i><b>2.2.1</b> Package kdd98</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-import-cleaning-and-preprocessing.html"><a href="data-import-cleaning-and-preprocessing.html#data-handling"><i class="fa fa-check"></i><b>2.2.2</b> Data handling</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="cleaning-preprocessing.html"><a href="cleaning-preprocessing.html"><i class="fa fa-check"></i><b>2.3</b> Cleaning &amp; Preprocessing</a></li>
<li class="chapter" data-level="2.4" data-path="feature-engineering.html"><a href="feature-engineering.html"><i class="fa fa-check"></i><b>2.4</b> Feature Engineering</a><ul>
<li class="chapter" data-level="2.4.1" data-path="feature-engineering.html"><a href="feature-engineering.html#dates"><i class="fa fa-check"></i><b>2.4.1</b> Dates</a></li>
<li class="chapter" data-level="2.4.2" data-path="feature-engineering.html"><a href="feature-engineering.html#zip-codes"><i class="fa fa-check"></i><b>2.4.2</b> Zip Codes</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="feature-selection.html"><a href="feature-selection.html"><i class="fa fa-check"></i><b>2.5</b> Feature Selection</a></li>
<li class="chapter" data-level="2.6" data-path="learning-process.html"><a href="learning-process.html"><i class="fa fa-check"></i><b>2.6</b> Learning Process</a><ul>
<li class="chapter" data-level="2.6.1" data-path="learning-process.html"><a href="learning-process.html#performance-metrics"><i class="fa fa-check"></i><b>2.6.1</b> Performance Metrics</a></li>
<li class="chapter" data-level="2.6.2" data-path="learning-process.html"><a href="learning-process.html#considered-algorithms"><i class="fa fa-check"></i><b>2.6.2</b> Considered Algorithms</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a><ul>
<li class="chapter" data-level="3.1" data-path="raw-data-import.html"><a href="raw-data-import.html"><i class="fa fa-check"></i><b>3.1</b> Raw data import</a></li>
<li class="chapter" data-level="3.2" data-path="cleaning-preprocessing-1.html"><a href="cleaning-preprocessing-1.html"><i class="fa fa-check"></i><b>3.2</b> Cleaning &amp; Preprocessing</a><ul>
<li class="chapter" data-level="3.2.1" data-path="cleaning-preprocessing-1.html"><a href="cleaning-preprocessing-1.html#date-features"><i class="fa fa-check"></i><b>3.2.1</b> Date features</a></li>
<li class="chapter" data-level="3.2.2" data-path="cleaning-preprocessing-1.html"><a href="cleaning-preprocessing-1.html#further-sanitizations"><i class="fa fa-check"></i><b>3.2.2</b> Further sanitizations</a></li>
<li class="chapter" data-level="3.2.3" data-path="cleaning-preprocessing-1.html"><a href="cleaning-preprocessing-1.html#binary-features"><i class="fa fa-check"></i><b>3.2.3</b> Binary Features</a></li>
<li class="chapter" data-level="3.2.4" data-path="cleaning-preprocessing-1.html"><a href="cleaning-preprocessing-1.html#multi-byte-categorical-features"><i class="fa fa-check"></i><b>3.2.4</b> Multi-byte Categorical Features</a></li>
<li class="chapter" data-level="3.2.5" data-path="cleaning-preprocessing-1.html"><a href="cleaning-preprocessing-1.html#missing-values"><i class="fa fa-check"></i><b>3.2.5</b> Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>3.3</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="3.3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#general-structure"><i class="fa fa-check"></i><b>3.3.1</b> General structure</a></li>
<li class="chapter" data-level="3.3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#correlations"><i class="fa fa-check"></i><b>3.3.2</b> Correlations</a></li>
<li class="chapter" data-level="3.3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#skewness"><i class="fa fa-check"></i><b>3.3.3</b> Skewness</a></li>
<li class="chapter" data-level="3.3.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#targets"><i class="fa fa-check"></i><b>3.3.4</b> Targets</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="preprocessing.html"><a href="preprocessing.html"><i class="fa fa-check"></i><b>3.4</b> Preprocessing</a><ul>
<li class="chapter" data-level="3.4.1" data-path="preprocessing.html"><a href="preprocessing.html#noisy-data"><i class="fa fa-check"></i><b>3.4.1</b> Noisy data</a></li>
<li class="chapter" data-level="3.4.2" data-path="preprocessing.html"><a href="preprocessing.html#constant-features"><i class="fa fa-check"></i><b>3.4.2</b> Constant features</a></li>
<li class="chapter" data-level="3.4.3" data-path="preprocessing.html"><a href="preprocessing.html#missing-values-sparse-features"><i class="fa fa-check"></i><b>3.4.3</b> Missing values / sparse features</a></li>
<li class="chapter" data-level="3.4.4" data-path="preprocessing.html"><a href="preprocessing.html#categorical-features"><i class="fa fa-check"></i><b>3.4.4</b> Categorical features</a></li>
<li class="chapter" data-level="3.4.5" data-path="preprocessing.html"><a href="preprocessing.html#feature-engineering-1"><i class="fa fa-check"></i><b>3.4.5</b> Feature Engineering</a></li>
<li class="chapter" data-level="3.4.6" data-path="preprocessing.html"><a href="preprocessing.html#feature-selection-1"><i class="fa fa-check"></i><b>3.4.6</b> Feature Selection</a></li>
<li class="chapter" data-level="3.4.7" data-path="preprocessing.html"><a href="preprocessing.html#feature-extraction"><i class="fa fa-check"></i><b>3.4.7</b> Feature Extraction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="model-evaluation.html"><a href="model-evaluation.html"><i class="fa fa-check"></i><b>4</b> Model evaluation</a></li>
<li class="chapter" data-level="5" data-path="results-and-discussion.html"><a href="results-and-discussion.html"><i class="fa fa-check"></i><b>5</b> Results and Discussion</a></li>
<li class="chapter" data-level="6" data-path="conclusions.html"><a href="conclusions.html"><i class="fa fa-check"></i><b>6</b> Conclusions</a><ul>
<li class="chapter" data-level="6.1" data-path="comparison-with-cup-winners.html"><a href="comparison-with-cup-winners.html"><i class="fa fa-check"></i><b>6.1</b> Comparison with Cup winners</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a><ul>
<li class="chapter" data-level="6.2" data-path="code.html"><a href="code.html"><i class="fa fa-check"></i><b>6.2</b> Code</a><ul>
<li class="chapter" data-level="6.2.1" data-path="code.html"><a href="code.html#preprocessing-1"><i class="fa fa-check"></i><b>6.2.1</b> Preprocessing</a></li>
<li class="chapter" data-level="6.2.2" data-path="code.html"><a href="code.html#appendix-transformers"><i class="fa fa-check"></i><b>6.2.2</b> Transformers</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="python-environment.html"><a href="python-environment.html"><i class="fa fa-check"></i><b>6.3</b> Python Environment</a></li>
<li class="chapter" data-level="6.4" data-path="dataset-dictionary.html"><a href="dataset-dictionary.html"><i class="fa fa-check"></i><b>6.4</b> Dataset Dictionary</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Designing a relational marketing model to maximize revenues of targeted marketing campaigns.</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-import-cleaning-and-preprocessing" class="section level2">
<h2><span class="header-section-number">2.2</span> Data Import, Cleaning and Preprocessing</h2>
<p>The goal of cleaning and preprocessing was to obtain a data set with input errors removed, consistent encoding of binary and categorical features and the treatment of features that could not be cast to numeric or categorical types automatically on import.</p>
<p>The necessary cleaning and preprocessing steps were determined iteratively and interactively on the learning data set, respecting information from the data set documentation provided. The transformations applied can be studied in the jupyter notebook <em>1_Preprocessing.ipynb</em><a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>.</p>
<div id="package-kdd98" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Package kdd98</h3>
<p>The python package <code>kdd98</code><a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> provides classes to automate the transformations developed in the jupyter notebooks.</p>
<p>The package can be used to download and read in raw data and apply all transformations. Each transformation is enclosed in a class that implements scikit-learn’s API, which allows for the transformations to be applied within a pipeline. Furthermore, the transformers can be trained and then persisted on disk for later use on other data.</p>
<p>The data set can be obtained at the following intermediate steps from <code>kdd98.data_handler.KDD98DataProvider</code>:</p>
<ul>
<li><strong>raw</strong>, as imported from csv using <code>pandas.read_csv()</code></li>
<li><strong>preprocessed</strong>, input errors removed, correct data types for all features</li>
<li><strong>numeric</strong>, after feature engineering (encoded categories, date and zip code transformations)</li>
</ul>
</div>
<div id="data-handling" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Data handling</h3>
<p>The complete data is distributed by the CUP committee pre-split into a learning and validation data set. The validation data was set aside and treated as <em>unseen</em> data for the final prediction after model selection on the learning data set. Cleaning and preprocessing was done on the learning data. before splitting the data into an actual training and test set in an 80/20 split (see Figure <a href="data-import-cleaning-and-preprocessing.html#fig:data-splitting">2.2</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:data-splitting"></span>
<img src="figures/preprocessing/data-splitting" alt="Data handling." width="0.8\textwidth" />
<p class="caption">
Figure 2.2: Data handling.
</p>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>see <a href="https://github.com/datarian/master-thesis-code/tree/master/notebooks/1_Preprocessing.ipynb">github.com/datarian/master-thesis-code/notebooks/1_Preprocessing.ipynb</a><a href="data-import-cleaning-and-preprocessing.html#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>see <a href="https://github.com/datarian/master-thesis-code/tree/master/kdd98">github.com/datarian/master-thesis-code/kdd98</a><a href="data-import-cleaning-and-preprocessing.html#fnref3" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tools-used.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="cleaning-preprocessing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/lunr.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["Master_Thesis_Florian_Hochstrasser.pdf"],
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
